<h3 class="text-xl text-center font-semibold text-gray-800 mb-4">Predictions</h3>

<div id="otherPredictionsContainer" class="{{^userHasPredicted}}{{^race.predictionsEnded}}hidden{{/race.predictionsEnded}}{{/userHasPredicted}}">
    <div class="{{#if @root.renderResult}}grid grid-cols-1 gap-y-4{{else}}grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 lg:grid-cols-2 gap-4{{/if}}">
        {{#if @root.renderResult}}
            {{#userPrediction}}
                <div class="flex flex-wrap">
                    <div class="w-full sm:w-1/4 flex justify-between sm:flex-col sm:justify-center items-center">
                        <span class="text-5xl sm:text-8xl font-bold text-opacity-40
                            {{#if (eq rank 1)}}text-yellow-500{{/if}}
                            {{#if (eq rank 2)}}text-gray-400{{/if}}
                            {{#if (eq rank 3)}}text-amber-600{{/if}}
                            {{#if (gt rank 3)}}text-gray-500{{/if}}">
                            {{rank}}.
                        </span>
                        <span class="text-xl sm:text-2xl font-bold text-gray-500 text-opacity-40 sm:mt-4">
                            {{points}} Points
                        </span>
                    </div>
                    <div class="w-full sm:w-2/4">
                        {{> prediction}}
                    </div>
                </div>
            {{/userPrediction}}
            {{#each predictions}}
                <div class="flex flex-wrap">
                    <div class="w-full sm:w-1/4 flex justify-between sm:flex-col sm:justify-center items-center">
                        <span class="text-5xl sm:text-8xl font-bold text-opacity-40
                            {{#if (eq rank 1)}}text-yellow-500{{/if}}
                            {{#if (eq rank 2)}}text-gray-400{{/if}}
                            {{#if (eq rank 3)}}text-amber-600{{/if}}
                            {{#if (gt rank 3)}}text-gray-500{{/if}}">
                            {{rank}}.
                        </span>
                        <span class="text-xl sm:text-2xl font-bold text-gray-500 text-opacity-40 sm:mt-4">
                            {{points}} Points
                        </span>
                    </div>
                    <div class="w-full sm:w-2/4">
                        {{> prediction}}
                    </div>
                </div>
            {{/each}}
        {{else}}
            {{#userPrediction}}
                {{> prediction}}
            {{/userPrediction}}
            {{#each predictions}}
                {{> prediction}}
            {{/each}}
        {{/if}}
    </div>

    {{^predictions}}{{^userPrediction}}
        <div class="m-auto flex justify-center items-center text-gray-500">
            <span>No predictions yet</span>
        </div>
    {{/userPrediction}}{{/predictions}}

    <script>
        if (localStorage.getItem("polepick-revealRace{{race.id}}")) {
            document.querySelectorAll('.predictionPoints').forEach(element => {
                element.classList.remove('hidden');
            })
        }
    </script>
</div>