<div class="max-w-4xl mx-auto py-8 px-2 sm:px-4">
    <div class="text-center mb-6">
        <h2 class="text-3xl font-bold text-gray-800 mb-2">Race Calendar</h2>
        <p class="sm:text-md text-gray-600">Formula 1 2025 Season</p>
    </div>

    <div class="space-y-4 sm:space-y-6">
        {{#each races}}
            <a href="/race/{{id}}" class="block group">
                <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden hover:shadow-xl hover:-translate-y-1 transition-all duration-300">
                    <div class="flex flex-row">
                        <div class="flex-1 p-2 sm:p-6">
                            <div class="sm:mb-2">
                                <div class="flex flex-col-reverse flex-reverse sm:flex-row items-center sm:justify-start justify-center space-x-3">
                                    <img src="flags/{{flag}}" alt="{{name}}" class="h-5 sm:h-6 rounded shadow-sm object-cover">
                                    <div>
                                        <h3 class="sm:text-xl font-bold sm:font-semibold text-gray-900 group-hover:text-red-700 transition-colors">
                                            <span class="hidden sm:block">{{name}}</span>
                                            <span class="sm:hidden">{{shortName}}</span>
                                        </h3>
                                        <p class="text-gray-500">{{circuit}}</p>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <div class="flex items-center sm:justify-start justify-center text-gray-600">
                                    <svg class="hidden sm:inline-block w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    <span class="font-medium text-sm sm:text-base">{{formattedDate}}</span>
                                </div>

                                <div class="flex items-center sm:justify-start justify-center text-gray-600">
                                    <svg class="hidden sm:inline-block w-5 h-5 mr-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                                    </svg>
                                    <span class="font-medium text-sm sm:text-base">{{formattedTime}}</span>
                                </div>
                            </div>

                            <div class="flex items-end sm:justify-between justify-center sm:mt-2 sm:mt-0">
                                <div class="hidden sm:flex mt-4 flex items-center text-gray-500 group-hover:text-red-600 transition-colors">
                                    <span class="text-sm font-medium">View Details</span>
                                    <svg class="w-4 h-4 ml-2 transform group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </div>
                                {{#if hasResult}}
                                    <span class="px-2 sm:px-3 sm:py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold">
                                    Race ended
                                </span>
                                {{else}}
                                    {{#if predictionsStarted}}
                                        {{#if predictionsEnded}}
                                            <span class="px-2 sm:px-3 sm:py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-semibold">
                                            Results soon
                                        </span>
                                        {{else}}
                                            <span class="px-2 sm:px-3 sm:py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold">
                                            Predict now!
                                        </span>
                                        {{/if}}
                                    {{else}}
                                        <span class="px-2 sm:px-3 sm:py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-semibold">
                                            {{#if (eq daysUntilRace 0)}}
                                                Today!
                                            {{else if (eq daysUntilRace 1)}}
                                                Tomorrow
                                            {{else}}
                                                In {{daysUntilRace}} days
                                            {{/if}}
                                    </span>
                                    {{/if}}
                                {{/if}}
                            </div>

                        </div>

                        <div class="flex items-center justify-center p-2 bg-gray-50 group-hover:bg-gray-100 transition-colors">
                            <div class="text-center">
                                <div class="bg-white rounded-xl p-1 shadow-sm group-hover:shadow-md transition-shadow">
                                    <img src="circuits/{{track_img}}" alt="{{name}} circuit" class="h-[96px] sm:h-[148px] object-contain mx-auto">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </a>
        {{/each}}
    </div>
</div>